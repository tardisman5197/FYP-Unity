# FYP-unity

The unity application that visualises the traffic model.

# FYP Server

An API which gives a user access to a multi-agent traffic simulation with an optional unity visualisation attachment.

## Table of contents
1. [Getting Started](#getting-started)
    1. [Prerequisites](#prerequisites)
    2. [Configuring the project](#configuring-the-project)
    3. [Building the project](#building-the-project)
2. [Running the project](#running-the-project)
    1. [Using a build](#using-a-build)
    2. [Without a build](#without-a-build)
3. [API Endpoints](#api-endpoints)


## Getting Started
 
These instructions will get help you get the API up and running.

### Prerequisites

1. [Install Go](https://golang.org/doc/install)

2. Run the commands below, to install the project's dependencies

```
go get github.com/gorilla/handlers
go get github.com/gorilla/mux
go get github.com/sirupsen/logrus
go get github.com/fogleman/gg
go get github.com/jonas-p/go-shp
```

3. Create a Unity executable, details of how to achive this can be found [here](https://github.com/tardisman5197/FYP-Unity)

### Configuring the project

Within the project folder there are a few `config.go` files that will need to be changed before the project can run.

####  `config.go`

Within this file there are 2 contants that can be altered.

 * `serverAddr` - this is the port that the API will be accessed thourgh

 * `unityAddr` - this is the port that the unity server will be running on

#### `controller/config.go`

This config file is used to define trhe behaviour of the API.

* `keyLength` - this determines how long the unique string assigned to a simulation should be

* `sendBase64Encoding` - this should be set to true if the API should send a Base64 encoded string containing the information about the image created

#### `simulation/config.go`
This file contains paramaters that can change how a simulation is ran.

* `decelerationProbability` - this number is used to determin if a vehicle might slow down even if there are no obsticles ahead. THis value should be set between [0, 1]

* `margin` - this number determins how far apart vehicles should stay

#### `view/config.go`
This file contains all of the necessary paramters to allow the server to visulaise the simulation using unity.

* `pathToUnity` - this variable should be set to the file path towards the [unity executable](https://github.com/tardisman5197/FYP-Unity)

* `pathToImages` - this variable stores the location of where the unity application is deposition the images it generates

* `removeImagesOnShutdown` - this constant is true if the images generated by the unity instance should be removed when the server shutsdown. This should be set to true if you do not need to keep the images and do not have a lot of disk space.

* `startUnity` - this constant is set to true if a unity applictaion should be started when the server starts. When debugging or developing the unity application this should be set to true and an independant unity application should be started

### Building the project

To create an executable run the command from within the project folder.

```
go build
```

## Running the project

Once the project is running the API will be accessable through the port configured (default = ":8080").

### Using a build

After [building the project](#building-the-project), simply run the executable file.

### Without a build

To run the project without creating an executable can be achived by running the command below from within the project folder.

```
go run *.go
```